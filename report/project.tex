\documentclass[letterpaper,12pt]{article}

%math and margin packages
\usepackage{amsmath,amsfonts,amssymb,amsthm}
\DeclareMathOperator{\sech}{sech}
\usepackage{braket}
\usepackage[margin=1.0in]{geometry}
\usepackage{bbold}
\usepackage{braket}
\usepackage{ragged2e}
\usepackage{tikz}
\usetikzlibrary{angles,quotes}
\usepackage{tkz-euclide}
\usepackage{svg}
\usepackage{setspace}
\usepackage{physics}
\usepackage{float}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{changepage}
\usepackage{gensymb}
\allowdisplaybreaks
\doublespacing

\usepackage[title]{appendix}
\usepackage{lipsum}

\usepackage{listings}
\lstset{ %
language=,           % choose the language of the code
%numbers=left,           % where to put the line-numbers
%numberstyle=\tiny,      % the size of the fonts that are used for the line-numbers
basicstyle=\small\ttfamily,    % the size of the fonts that are used for the line-numbers, singlespaced lines
columns=flexible,
breaklines=true
}

\usepackage{titling}
\renewcommand\maketitlehooka{\null\mbox{}\vfill}
\renewcommand\maketitlehookd{\vfill\null}

\usepackage[colorlinks=true,linkcolor=blue]{hyperref}

\title{
\normalfont \normalsize 
\textsc{APPM 2360 - Intro Diff Eq W/Lin Alg \hfill Fall 2024} \\
[10pt] 
\rule{\linewidth}{0.5pt} \\[6pt] 
\huge Project 2 - Analyzing The Mariana Trench \\
\rule{\linewidth}{2pt}  \\[10pt]
}
\date{November 12, 2024}
\author{Daniel Alemayehu, Eli Grundberg, Sam Meyn}


\begin{document}
\begin{titlingpage}
\maketitle
\end{titlingpage}
\newpage
\tableofcontents
\newpage
\section{Introduction}
We are interested in analyzing and understading the layout of the Mariana Trench. 
However, we have a large amount of data to work with so we'll need to work to create an approximation of the trench such that we can still have an accurate picture of the trench to better analyze while utilizing less data and memory to do so. 
\section{Inital Trench Investigations}
In order to better understand reducing the trench data we'll take a subset of it and operate on it as normal.
Utilizing Matlab's Contour and Surface Plots we can get a good picture of the trench below from our data subset.
\begin{figure}[H]
    \begin{adjustwidth}{-1in}{-1in}
    \centering
    \begin{subfigure}[b]{0.65\textwidth}
        \centering
        \includesvg[inkscapelatex=false, width=\textwidth]{../figures/section1/surf}
        \label{fig:1a}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.65\textwidth}
        \centering
        \includesvg[inkscapelatex=false, width=\textwidth]{../figures/section1/contour}
        \label{fig:1b}
    \end{subfigure}
    \caption{Code in Appendix \ref{appendix:A}}
    \label{fig:1}
    \end{adjustwidth}
\end{figure}
We can also find that the maximum depth of the trench is -10.93 km at lattitude \(13.2\degree\) longitude \(140.3\degree\) (calculated in Appendix \ref{appendix:A}).
In addition, in our data subset can also find that the average depth of the trench below sea level is given to be -7.2048 km (calculated in Appendix \ref{appendix:A}).
\section{Eigenvalue Computation}
We can find an eigenvectors associated with our matrix using an algorithm outlined in (appendix w/ matlab code + algorithm overview). \
The reason this algorithm works can be explained as follows:
We can also apply \textit{Gram-Schmidt Orthogonalization} to find eigenvectors as well which we'll for for the 50 largest eigenvectors (code appendix).
\begin{figure}[H]
    \centering
    \includesvg[inkscapelatex=false, width=\textwidth]{../figures/section2/vector_plot}
    \caption{Eigenvector \(V_1\) plot}
\end{figure}
\section{SVD Incomplete Decomposition}
After completing our Incomplete SVD Decomposition (where \(U,V\) have 50 columns) our spy output looks like the following:
\begin{figure}[H]
    \begin{adjustwidth}{-1in}{-1in}
    \centering
    \begin{subfigure}[b]{0.65\textwidth}
        \centering
        \includesvg[inkscapelatex=false, width=\textwidth]{../figures/section3/spy_sigma}
        \caption{\(\mathbf{\Sigma}\) Matrix}
        %\label{fig:4a}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.65\textwidth}
        \centering
        \includesvg[inkscapelatex=false, width=\textwidth]{../figures/section3/spy_u}
        \caption{\(\mathbf{U}\) Matrix}
        %\label{fig:4a}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.65\textwidth}
        \centering
        \includesvg[inkscapelatex=false, width=\textwidth]{../figures/section3/spy_vT}
        \caption{\(\mathbf{V^T}\) Matrix}
        %\label{fig:4a}
    \end{subfigure}
    \end{adjustwidth}
\end{figure}
As one method for comparing the efficiency of the Incomplete SVD vs the full matrix of trench data we can compare the total number of entries and the total number of nonzero entries.
\begin{itemize}
    \item For the number of total entries, our matrix has 7.39\% of the number of total matrix entries as matrix \(\vb{A}\).
    \item For the number of nonzero entries, our matrix has 7.26\% of the number of nonzero entries as matrix \(\vb{A}\).
\end{itemize}
We've made plots of several SVD decompositions with varying column counts (10, 50, 100) which appear below.
\begin{figure}[H]
    \centering
    \begin{adjustwidth}{-1in}{-1in}
    \begin{subfigure}[b]{0.65\textwidth}
        \centering
        \includesvg[inkscapelatex=false, width=\textwidth]{../figures/section3/contour_100}
        \caption{\(\mathbf{\Sigma}\) Matrix}
        %\label{fig:4a}
    \end{subfigure}
    \begin{subfigure}[b]{0.65\textwidth}
        \centering
        \includesvg[inkscapelatex=false, width=\textwidth]{../figures/section3/surf_100}
        \caption{\(\mathbf{\Sigma}\) Matrix}
        %\label{fig:4a}
    \end{subfigure}
    \end{adjustwidth}
\end{figure}
\begin{figure}[H]
    \begin{adjustwidth}{-1in}{-1in}
    \centering
    \begin{subfigure}[b]{0.60\textwidth}
        \centering
        \includesvg[inkscapelatex=false, width=\textwidth]{../figures/section3/contour_50}
        \caption{\(\mathbf{\Sigma}\) Matrix}
        %\label{fig:4a}
    \end{subfigure}
    \begin{subfigure}[b]{0.60\textwidth}
        \centering
        \includesvg[inkscapelatex=false, width=\textwidth]{../figures/section3/surf_50}
        \caption{\(\mathbf{\Sigma}\) Matrix}
        %\label{fig:4a}
    \end{subfigure}
    \end{adjustwidth}
\end{figure}
\begin{figure}[H]
    \begin{adjustwidth}{-1in}{-1in}
    \centering
    \begin{subfigure}[b]{0.65\textwidth}
        \centering
        \includesvg[inkscapelatex=false, width=\textwidth]{../figures/section3/contour_10}
        \caption{\(\mathbf{\Sigma}\) Matrix}
        %\label{fig:4a}
    \end{subfigure}
    \begin{subfigure}[b]{0.65\textwidth}
        \centering
        \includesvg[inkscapelatex=false, width=\textwidth]{../figures/section3/surf_10}
        \caption{\(\mathbf{\Sigma}\) Matrix}
        %\label{fig:4a}
    \end{subfigure}
    \end{adjustwidth}
\end{figure}
These look approximate to the original data? 
The maxxes and mins appear below.
\begin{itemize}
    \item Lorem Ipsum
\end{itemize}
\section{Conclusion}
I have no idea what to put here...
\pagebreak
\begin{appendices}
\section{Figure \ref{fig:1} Code} \label{appendix:A}
The following code is in MATLAB syntax:
\begin{spacing}{1}
\begin{lstlisting}
clc
clear
close all

%% Part 2.1 - Samuel H. Meyn

%% 2.1.1
%
% Data Plots
%

%Import all data
Z = importdata('mariana_depth.csv');
Y = importdata('mariana_longitude.csv');
X = importdata('mariana_latitude.csv');
Z = transpose(Z);
Zkm = Z .* 1/1000;

figure(1)

Levels = [-11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1 0 1 2 3 4 5 6 7 8 9 10 11];
contour(Y, X, Zkm, Levels)
title('Mariana Depth along Latitude and Longitude');
xlabel('Longnitude (deg)');
ylabel('Latitude (deg)');
cb = contourcbar("eastoutside");
cb.XLabel.String = "Elevation (km)";

figure(2)

surf(Y,X,Zkm, 'EdgeColor','none')
title('Mariana Depth along Latitude and Longitude');
xlabel('Longnitude (deg)');
ylabel('Latitude(deg)');
zlabel('Elevation (meters)');
colorbar;

%% 2.1.2

% Finding Maximal Depth

%
% Incorrect Code (returns incorrect lat/long
%
% Min= min(Z, [], 'all');
% for i=1:length(Z)
%     for j=1:width(Z)
%         if Z(i,j) == Min
%             break
%         end
%     end
% end
% 
% maxDepthLatitude = j;
% maxDepthLongitude = i;
% maxDepthLongitude;
% maxDepthLatitude;
% Min;
% Z(maxDepthLongitude, maxDepthLatitude);

[Min2, I] = min(Z, [], 'all');
[MinLong, MinLat] = ind2sub([1440 1320], I);
Min2
Z(MinLong, MinLat)
X(MinLat)
Y(MinLong)

%% 2.1.3

% Mean depth sub -6km
meanNum = 0;
N = 0;

for i=1:length(Z)
    for j=1:width(Z)
        if Z(i,j) < -6000
            meanNum = meanNum + Z(i,j);
            N = N + 1;
        end
    end
end

meanTrenchDepth = meanNum/N;
meanTrenchDepth/1000
\end{lstlisting}
\end{spacing}
\end{appendices}
\end{document}
